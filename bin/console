#!/bin/bash

if [ "$1" = "build" ]; then
    if [[ "$2" = "debug" || "$2" = "release" ]]; then
        mkdir -p "./target/$2"
        gcc -o "./target/$2/main" "./src/main.c"
        echo "Build ($2) finished executing."
        exit 0
    else
        echo "Error."
        echo "Invalid or missing build target."
        exit 1
    fi
fi

if [ "$1" = "run" ]; then
    if [ ! -f "./target/debug/main" ]; then
        echo "Error."
        echo "Binary not found."
        exit 1
    fi
    "./target/debug/main"
    exit 0
fi

if [ "$1" = "check-requirements" ]; then
    if ! command -v gcc &> /dev/null; then
        echo -e " - GCC \xE2\x9C\x97"
    else
        echo -e " - GCC \xE2\x9C\x93"
    fi
    echo "Requirements check finished executing."
    exit 0
fi

echo "Error."
echo "Command not found."
exit 1